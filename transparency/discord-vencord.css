/* =========================================================
   1. GLOBAL TRANSPARENCY & TINT
   ========================================================= */

/* Nuke all background variables so layers don't stack */
:root, .theme-dark, .theme-light, * {
    --background-primary: transparent !important;
    --background-secondary: transparent !important;
    --background-secondary-alt: transparent !important;
    --background-tertiary: transparent !important;
    --bg-base-primary: transparent !important;
    --bg-base-secondary: transparent !important;
    --bg-base-tertiary: transparent !important;
    --bg-overlay-app-frame: transparent !important;
    --bg-overlay-chat: transparent !important;
    
    /* Keep floating menus slightly visible but translucent */
    --background-floating: rgba(0, 0, 0, 0.5) !important;
    /* Text box visibility */
    --channeltextarea-background: rgba(0, 0, 0, 0.2) !important;
}

/* Apply the base dark tint (The "sunglasses" layer) */
body, #app-mount, .app-mount {
    background: transparent !important;
    /* Adjust the 0.15 value to make it darker/lighter */
    background-color: rgba(0, 0, 0, 0.15) !important; 
}


/* =========================================================
   2. COLOR & READABILITY (Absolute Pure White)
   ========================================================= */

/* Force absolutely all UI text, headers, and icons to pure white */
:root, .theme-dark, .theme-light {
    --text-normal: #ffffff !important;
    --text-muted: #ffffff !important; 
    --header-primary: #ffffff !important;
    --header-secondary: #ffffff !important;
    
    /* This section controls the top toolbar and message hover icons */
    --interactive-normal: #ffffff !important; 
    --interactive-hover: #ffffff !important;  
    --interactive-active: #ffffff !important; 
    --interactive-muted: #ffffff !important;  
    --channels-default: #ffffff !important;   
}

/* Force messages, markdown, usernames, and stubborn icons to pure white */
[class*="messageContent_"],
[class*="markup_"],
[class*="username_"], 
[class*="name_"],
[class*="icon_"] {    
    color: #ffffff !important;
}

/* =========================================================
   3. STRUCTURAL CLEANUP
   ========================================================= */

/* Nuke backgrounds on all main structural elements */
[class*="app_"], [class*="bg_"], [class*="base_"],
[class*="guilds_"], [class*="sidebar_"], [class*="panels_"],
[class*="container_"], [class*="chat_"], [class*="chatContent_"],
[class*="members_"], [class*="wrapper_"], [class*="scroller_"],
[class*="privateChannels_"], [class*="searchBar_"] {
    background: transparent !important;
    background-color: transparent !important;
}

/* Nuke backgrounds on Settings menus and popouts */
[class*="layer_"], [class*="layers_"],
[class*="standardSidebarView_"], [class*="sidebarRegion_"],
[class*="contentRegion_"], [class*="customColumn_"],
[class*="background_"], [class*="settings_"] {
    background: transparent !important;
    background-color: transparent !important;
}

/* 1. Timestamps */
[class*="timestamp_"], time {
    color: #ffffff !important;
}
/* =========================================================
   4. UN-YEET THE PINGS (Notification Badges)
   ========================================================= */
/* Our previous 'base_' nuke caught 'baseShapeRound_', 
   so we force the red pill back online here. */
[class*="baseShapeRound_"]{
    background: #f23f43 !important; /* Discord's native ping red */
    background-color: #f23f43 !important;
    color: #ffffff !important;
    opacity: 1 !important;
}

/* =========================================================
   5. RESTORE ALL HOVERS & KEYBOARD HIGHLIGHTS
   ========================================================= */

/* 1. Chat Messages (Mouse Hover & Keyboard Focus) */
[class*="messageListItem_"]:hover,
[class*="messageListItem_"]:focus-within {
    background-color: rgba(255, 255, 255, 0.08) !important; 
    border-radius: 8px !important;
}

/* 2. Autocomplete, Ping Menus, and Command Lists (Keyboard Navigation) */
[role="option"][aria-selected="true"],
[role="option"]:hover,
[role="menuitem"][aria-selected="true"],
[role="menuitem"]:hover,
[class*="autocomplete_"] [aria-selected="true"] {
    background-color: rgba(255, 255, 255, 0.15) !important;
    border-radius: 6px !important;
}

/* 3. Member List, Channels, and Context Menus */
[class*="member_"]:hover,
[class*="member_"][aria-selected="true"],
[class*="interactive_"]:hover,
[class*="interactive_"][aria-selected="true"],
[class*="selectable_"]:hover,
[class*="item_"]:hover {
    background-color: rgba(255, 255, 255, 0.08) !important;
    border-radius: 6px !important;
}

/* Ensure inner wrappers don't block the highlights */
[role="option"][aria-selected="true"] > div,
[class*="autocomplete_"] [aria-selected="true"] [class*="base_"],
[class*="member_"]:hover [class*="layout_"] {
    background: transparent !important;
    background-color: transparent !important;
}